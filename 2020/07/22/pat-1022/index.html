<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="robots" content="index, follow">

    <!-- Baidu Site SEO -->
    <meta name="baidu-site-verification" content="codeva-Fn6WoXLOMw" />
    <!-- <meta name="baidu-site-verification" content="codeva-mdLm33TTHY" /> -->

    <!-- Baidu analytics -->
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?1a364896f028f8093396007dc78eb0a0";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WF4EY3839B"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-WF4EY3839B');
    </script>

    <!-- Bing Site SEO -->
    <meta name="msvalidate.01" content="85648BC2E966622B7CC9FF6BCB04E326" />

    <!-- title -->
    
        <title>【PAT甲级】1022 Digital Library（map映射，scanf、getline、getchar用法） | Lili Liang</title>
    
  
    <!-- Open graph -->
    <meta name="description" content="题目链接：1022 Digital Library (30分) 1 题目描述  A Digital Library contains millions of books, stored according to their titles, authors, key words of their abstracts, publishers, and published years. Each boo">
<meta property="og:type" content="article">
<meta property="og:title" content="【PAT甲级】1022 Digital Library（map映射，scanf、getline、getchar用法）">
<meta property="og:url" content="https://leungll.site/2020/07/22/pat-1022/index.html">
<meta property="og:site_name" content="Lili Liang">
<meta property="og:description" content="题目链接：1022 Digital Library (30分) 1 题目描述  A Digital Library contains millions of books, stored according to their titles, authors, key words of their abstracts, publishers, and published years. Each boo">
<meta property="og:locale">
<meta property="article:published_time" content="2020-07-23T03:46:24.000Z">
<meta property="article:modified_time" content="2024-04-29T11:53:38.811Z">
<meta property="article:author" content="Lili Liang 梁莉莉">
<meta property="article:tag" content="C&#x2F;C++">
<meta property="article:tag" content="PAT">
<meta property="article:tag" content="Map映射">
<meta property="article:tag" content="输入数据处理">
<meta name="twitter:card" content="summary">

    <!-- Canonical -->
    
        <link rel="canonical" href="https://leungll.site/2020/07/22/pat-1022/">
    

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/logo.png">

    <!-- CSS -->
    
<link rel="stylesheet" href="/css/reset.css">

    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/markdown.css">

    
<link rel="stylesheet" href="/css/fonts.css">


    <script>
        MathJax = {
          tex: {
            packages: ['base', 'ams'],
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']],
            processEscapes: true
          },
          options: {
            ignoreHtmlClass: "tex2jax_ignore",
            processHtmlClass: "tex2jax_process"
          }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Lili Liang" type="application/atom+xml">
</head>

    <body>
        <div class="paper">
            <div class="paper-main">
                
                    <div class="post-header">
    <a class="logo" href="/">Lili Liang 梁莉莉</a>
    <!-- <div class="logo"><a href="/" title="Len"><img src="/img/logo.svg" alt="Len" aria-label="logo" height="20"></a></div> -->
        <ul class="nav">
            
            <li><a href="/">Blogs</a></li>
            
            <li><a href="/archives">Archives</a></li>
            
            <li><a href="/about">About</a></li>
            
        </ul>
    </a>
</div>

                
                <div class="post-main">
    
        <!-- Post Title -->
        <div class="post-main-title">
            【PAT甲级】1022 Digital Library（map映射，scanf、getline、getchar用法）
        </div>

        <!-- Post Meta Information -->
        <div class="post-meta">
            <!-- Show Creation Date -->
            Created: Jul 23, 2020 ｜ 

            <!-- Show Last Updated Date -->
            
                Last updated: Apr 29, 2024 ｜ 
            

            <!-- Show Post Categories -->
            
                <a href="/categories/%E7%AE%97%E6%B3%95/"># 算法</a>
            
        </div>

        <!-- Post Content -->
        <div class="post-md">
            <p><strong>题目链接：<a target="_blank" rel="noopener" href="https://pintia.cn/problem-sets/994805342720868352/problems/994805480801550336">1022 Digital Library (30分)</a></strong></p>
<h2><span id="1-题目描述">1 题目描述</span></h2>
<blockquote>
<p>A Digital Library contains millions of books, stored according to their titles, authors, key words of their abstracts, publishers, and published years. Each book is assigned an unique 7-digit number as its ID. Given any query from a reader, you are supposed to output the resulting books, sorted in increasing order of their ID’s.</p>
</blockquote>
<h3><span id="input-specification">Input Specification</span></h3>
<blockquote>
<p>Each input file contains one test case. For each case, the first line contains a positive integer N (≤ 10​4​​) which is the total number of books. Then N blocks follow, each contains the information of a book in 6 lines:</p>
<ul>
<li>Line #1: the 7-digit ID number;</li>
<li>Line #2: the book title – a string of no more than 80 characters;</li>
<li>Line #3: the author – a string of no more than 80 characters;</li>
<li>Line #4: the key words – each word is a string of no more than 10 characters without any white space, and the keywords are separated by exactly one space;</li>
<li>Line #5: the publisher – a string of no more than 80 characters;</li>
<li>Line #6: the published year – a 4-digit number which is in the range [1000, 3000].</li>
</ul>
<p>It is assumed that each book belongs to one author only, and contains no more than 5 key words; there are no more than 1000 distinct key words in total; and there are no more than 1000 distinct publishers.<br>
After the book information, there is a line containing a positive integer M (≤ 1000) which is the number of user’s search queries. Then M lines follow, each in one of the formats shown below:</p>
<ul>
<li>1: a book title</li>
<li>2: name of an author</li>
<li>3: a key word</li>
<li>4: name of a publisher</li>
<li>5: a 4-digit number representing the year</li>
</ul>
</blockquote>
<h3><span id="output-specification">Output Specification</span></h3>
<blockquote>
<p>For each query, first print the original query in a line, then output the resulting book ID’s in increasing order, each occupying a line. If no book is found, print <code>Not Found</code> instead.</p>
</blockquote>
<h3><span id="sample-input">Sample Input</span></h3>
<pre><code>3
1111111
The Testing Book
Yue Chen
test code debug sort keywords
ZUCS Print
2011
3333333
Another Testing Book
Yue Chen
test code sort keywords
ZUCS Print2
2012
2222222
The Testing Book
CYLL
keywords debug book
ZUCS Print2
2011
6
1: The Testing Book
2: Yue Chen
3: keywords
4: ZUCS Print
5: 2011
3: blablabla
</code></pre>
<h3><span id="sample-output">Sample Output</span></h3>
<pre><code>1: The Testing Book
1111111
2222222
2: Yue Chen
1111111
3333333
3: keywords
1111111
2222222
3333333
4: ZUCS Print
1111111
5: 2011
1111111
2222222
3: blablabla
Not Found
</code></pre>
<h2><span id="2-解题思路">2 解题思路</span></h2>
<ul>
<li><strong>题目大意</strong>：模拟数字图书馆的查询功能。会给出 $n$ 本书的信息，以及 $m$ 个需要查询的命令，数字标号对应相应的命令，数字编号后面的字符串是查询的搜索词，要求输出这行命令以及输出满足条件的书的 <code>id</code> ，如果一个都没有找到，输出 <code>Not Found</code>。</li>
<li><strong>解题技巧</strong>：
<ul>
<li>使用<code>map&lt; string, set&lt;int&gt; &gt;</code>对图书信息进行存储，<code>string</code>存储关键字信息，<code>set&lt;int&gt;</code>存储图书 $id$</li>
<li>使用<code>getline(cin, ttitle)</code>快速处理多行输入数据</li>
<li>对于关键词 $keywords$ ：未知关键词个数，可使用<code>while(cin &gt;&gt; tkry)</code>进行判断，当<code>getchar()为'\n' </code>时，则跳出循环</li>
<li>对于输入数据<code>1: The Testing Book</code>：可使用<code>scanf(&quot;%d: &quot;, &amp;num)</code>，对多余信息<code>:</code>进行过滤处理，以提取有效信息</li>
<li>对于输入 $7$ 位图书 $id$ ：可使用<code>printf(&quot;%07d\n&quot;, *it)</code></li>
</ul>
</li>
</ul>
<h2><span id="3-题解">3 题解</span></h2>
<pre class="line-numbers language-language-cpp"><code class="language-language-cpp">#include <iostream>
#include <cstdio>
#include <map>
#include <set>
using namespace std;

map<string, set<int>> title, author, key, pub, year;

void query(map<string, set<int>> &m, string &str)&#123;
    if(m.find(str) != m.end())&#123;
        for(auto it = m[str].begin();it != m[str].end();it++)&#123;
            printf("%07d\n", *it);
        &#125;
    &#125;else&#123;
        printf("Not Found\n");
    &#125;
&#125;

int main()&#123;
    #ifdef ONLINE_JUDGE
    #else
    freopen("input.txt", "r", stdin);
    #endif // ONLINE_JUDGE

    int n;
    scanf("%d", &n);
    for(int i = 0;i < n;i++)&#123;
        int id;
        string ttitle, tauthor, tkey, tpub, tyear;
        scanf("%d\n", &id);
        getline(cin, ttitle);
        title[ttitle].insert(id);
        getline(cin, tauthor);
        author[tauthor].insert(id);
        while(cin >> tkey)&#123;
            key[tkey].insert(id);
            char c = getchar();
            if(c == '\n')&#123;
                break;
            &#125;
        &#125;
        getline(cin, tpub);
        pub[tpub].insert(id);
        getline(cin, tyear);
        year[tyear].insert(id);
    &#125;
    int m;
    scanf("%d", &m);
    for(int i = 0;i < m;i++)&#123;
        int num;
        scanf("%d: ", &num);
        string temp;
        getline(cin, temp);
        cout << num << ": " << temp << "\n";
        if(num == 1)&#123;
            query(title, temp);
        &#125;else if(num == 2)&#123;
            query(author, temp);
        &#125;else if(num == 3)&#123;
            query(key, temp);
        &#125;else if(num == 4)&#123;
            query(pub, temp);
        &#125;else if(num == 5)&#123;
            query(year, temp);
        &#125;
    &#125;
    return 0;
&#125;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></string,></string,></set></map></cstdio></iostream></code></pre>

        </div>
    

    <!-- Post Tags -->
    
        <div class="post-meta">
            Tags:
            
                <a href="/tags/C-C/"> / C/C++</a>
            
                <a href="/tags/PAT/"> / PAT</a>
            
                <a href="/tags/Map%E6%98%A0%E5%B0%84/"> / Map映射</a>
            
                <a href="/tags/%E8%BE%93%E5%85%A5%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"> / 输入数据处理</a>
            
        </div>
    
</div>
                <div class="footer">
    <span>Copyright © 2025 Lili Liang</span>
    <span>Build with <a target="_blank" rel="noopener" href="https://github.com/LenChou95/hexo-theme-ZenMind">ZenMind</a></span>
</div>

<!-- Copy Code Funciton -->
<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        document.querySelectorAll('pre').forEach((pre) => {
            const button = document.createElement('button');
            button.innerText = 'Copy';
            button.className = 'copy-button';

            button.addEventListener('click', () => {
            const codeLines = pre.querySelectorAll('.hljs-ln-code');
            const codeContent = Array.from(codeLines)
                .map(line => line.textContent)
                .join('\n');

            navigator.clipboard.writeText(codeContent).then(() => {
                button.innerText = '√ Copied!';
                setTimeout(() => {
                button.innerText = 'Copy';
                }, 3000);
            }).catch(err => {
                console.error('Copy failed: ', err);
                alert('Unable to copy code, please check browser permissions!');
            });
            });

            pre.appendChild(button);
        });
    });
</script>

<!-- Change Code Style -->

<link rel="stylesheet" href="/css/a11y-dark.min.css">

<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github-dark.min.css"> -->


<script src="/js/highlight.min.js"></script>


<script src="/js/highlightjs-line-numbers.js"></script>


<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>

            </div>
        </div>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<!-- <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</body>
</html>